import { GenkitError, GenerateRequest, z } from 'genkit';
import { VeoImage, VeoVideo, ClientOptions } from './types.js';
export { checkModelName, cleanSchema, extractText, extractVersion, modelName } from '../common/utils.js';
import { ImagenInstance } from '../common/types.js';
import 'genkit/model';

/**
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Retrieves an API key from environment variables.
 *
 * @returns The API key as a string, or `undefined` if none of the specified
 *          environment variables are set.
 */
declare function getApiKeyFromEnvVar(): string | undefined;
declare const MISSING_API_KEY_ERROR: GenkitError;
declare const API_KEY_FALSE_ERROR: GenkitError;
/**
 * Checks and retrieves an API key based on the provided argument and environment variables.
 *
 * - If `pluginApiKey` is a non-empty string, it's used as the API key.
 * - If `pluginApiKey` is `undefined` or an empty string, it attempts to fetch the API key from environment
 * - If `pluginApiKey` is `false`, key retrieval from the environment is skipped, and the function
 *   will return `undefined`. This mode indicates that the API key is expected to be provided
 *   at a later stage or in a different context.
 *
 * @param pluginApiKey - An optional API key string, `undefined` to check the environment, or `false` to bypass all checks in this function.
 * @returns The resolved API key as a string, or `undefined` if `pluginApiKey` is `false`.
 * @throws {Error} MISSING_API_KEY_ERROR - Thrown if `pluginApiKey` is not `false` and no API key
 *   can be found either in the `pluginApiKey` argument or from the environment.
 */
declare function checkApiKey(pluginApiKey: string | false | undefined): string | undefined;
/**
 * Calculates and returns the effective API key based on multiple potential sources.
 * The order of precedence for determining the API key is:
 * 1. `requestApiKey` (if provided)
 * 2. `pluginApiKey` (if provided and not `false`)
 * 3. Environment variable (if `pluginApiKey` is not `false` and `pluginApiKey` is not provided)
 *
 * @param pluginApiKey - The apiKey value provided during plugin initialization.
 * @param requestApiKey - The apiKey provided to an individual generate call.
 * @returns The resolved API key as a string.
 * @throws {Error} API_KEY_FALSE_ERROR - Thrown if `pluginApiKey` is `false` and `requestApiKey` is not provided
 * @throws {Error} MISSING_API_KEY_ERROR - Thrown if no API key can be resolved from any source
 */
declare function calculateApiKey(pluginApiKey: string | false | undefined, requestApiKey: string | undefined): string | undefined;
declare function extractVeoImage(request: GenerateRequest): VeoImage | undefined;
declare function extractVeoVideo(request: GenerateRequest): VeoVideo | undefined;
declare function extractImagenImage(request: GenerateRequest): ImagenInstance['image'] | undefined;
/**
 * For each field in ClientOptions, if the request config object has
 * a matching non-empty/non-null field, it overrides the original.
 */
declare function calculateRequestOptions<T extends z.ZodObject<any, any, any>>(clientOptions: ClientOptions, reqConfig?: z.infer<T>): ClientOptions;
/**
 * The config can have client option overrides, but they should not
 * be sent with the request like normal config.
 * @param requestConfig
 */
declare function removeClientOptionOverrides<T extends z.ZodObject<any, any, any>>(requestConfig?: z.infer<T>): z.infer<T>;

export { API_KEY_FALSE_ERROR, MISSING_API_KEY_ERROR, calculateApiKey, calculateRequestOptions, checkApiKey, extractImagenImage, extractVeoImage, extractVeoVideo, getApiKeyFromEnvVar, removeClientOptionOverrides };
