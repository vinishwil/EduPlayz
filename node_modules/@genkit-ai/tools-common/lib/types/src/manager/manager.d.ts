import { type Action, type RunActionResponse } from '../types/action';
import * as apis from '../types/apis';
import type { TraceData } from '../types/trace';
import { type DevToolsInfo } from '../utils/utils';
import { ProcessManager } from './process-manager';
import { RuntimeEvent, type RuntimeInfo, type StreamingCallback } from './types';
export declare const GENKIT_REFLECTION_API_SPEC_VERSION = 1;
interface RuntimeManagerOptions {
    telemetryServerUrl?: string;
    manageHealth?: boolean;
    projectRoot: string;
    processManager?: ProcessManager;
    disableRealtimeTelemetry?: boolean;
}
export declare class RuntimeManager {
    readonly telemetryServerUrl: string | undefined;
    private manageHealth;
    readonly projectRoot: string;
    readonly processManager?: ProcessManager;
    readonly disableRealtimeTelemetry: boolean;
    private filenameToRuntimeMap;
    private filenameToDevUiMap;
    private idToFileMap;
    private eventEmitter;
    private watchers;
    private healthCheckInterval?;
    private constructor();
    static create(options: RuntimeManagerOptions): Promise<RuntimeManager>;
    stop(): Promise<void>;
    listRuntimes(): RuntimeInfo[];
    getRuntimeById(id: string): RuntimeInfo | undefined;
    getMostRecentRuntime(): RuntimeInfo | undefined;
    getMostRecentDevUI(): DevToolsInfo | undefined;
    onRuntimeEvent(listener: (eventType: RuntimeEvent, runtime: RuntimeInfo) => void): void;
    listActions(input?: apis.ListActionsRequest): Promise<Record<string, Action>>;
    runAction(input: apis.RunActionRequest, streamingCallback?: StreamingCallback<any>, onTraceId?: (traceId: string) => void): Promise<RunActionResponse>;
    cancelAction(input: {
        traceId: string;
        runtimeId?: string;
    }): Promise<{
        message: string;
    }>;
    listTraces(input: apis.ListTracesRequest): Promise<apis.ListTracesResponse>;
    getTrace(input: apis.GetTraceRequest): Promise<TraceData>;
    streamTrace(input: apis.StreamTraceRequest, streamingCallback: StreamingCallback<any>): Promise<void>;
    addTrace(input: TraceData): Promise<void>;
    private notifyRuntime;
    private setupRuntimesWatcher;
    private setupDevUiWatcher;
    private handleNewDevUi;
    private handleRemovedDevUi;
    private handleNewRuntime;
    private handleRemovedRuntime;
    private httpErrorHandler;
    private handleStreamError;
    private streamToString;
    private performHealthChecks;
    private removeRuntime;
}
export {};
